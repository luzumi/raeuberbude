<div class="device creator-minimal">
  <div class="top-row">
    <div class="status">
      <div class="dot" [class.on]="pcOn" [class.off]="!pcOn"></div>
      <div class="name">Creator PC</div>
      <div class="state">{{ pcOn ? 'Online' : 'Offline' }}</div>
    </div>

    <div class="actions-right" *ngIf="!pcOn">
      <button class="btn primary" (click)="$event.stopPropagation(); wakePc()" [class.inactive]="!wolAvailable" [title]="wolAvailable ? 'Wake on LAN' : 'Aktion nicht verfÃ¼gbar'">
        âš¡ WOL
      </button>
    </div>

  </div>

  <div class="content" style="display:flex; flex-direction:column; height:100%; min-height:0; gap:.75rem;" *ngIf="pcOn; else offlineTpl">
    <div class="gauges gauges-row" style="display:flex; align-items:center; justify-content:space-between; height:20%; min-height:0; gap:.75rem; --g-gap:.75rem;">
      <app-speedometer style="--sm-height:90%; --sm-width:auto; flex:1 1 0; height:100%; max-width: calc((100% - (2 * var(--g-gap))) / 3);" [title]="'CPU'" [value]="cpuPercent"></app-speedometer>
      <span class="g-spacer" style="flex:0 0 var(--g-gap);"></span>
      <div class="gauge-wrapper gpu-wrapper" style="flex:1 1 0; height:100%; max-width: calc((100% - (2 * var(--g-gap))) / 3); position:relative;">
        <app-speedometer class="main" style="--sm-height:90%; --sm-width:auto; height:100%; width:100%;" [title]="metric2Label" [value]="gpuPercent || ramPercent"></app-speedometer>
        <app-speedometer class="mini" [title]="'GPU Â°C'" [value]="gpuTempC" [min]="0" [max]="110"></app-speedometer>
      </div>
      <span class="g-spacer" style="flex:0 0 var(--g-gap);"></span>
      <app-speedometer style="--sm-height:90%; --sm-width:auto; flex:1 1 0; height:100%; max-width: calc((100% - (2 * var(--g-gap))) / 3);" [title]="'Takt'" [value]="freqPercent" [max]="5300"></app-speedometer>
    </div>

    <div class="screenshot" style="height:40%; min-height:0;">
      <div class="screenshot-card" style="height:100%; display:flex; align-items:center; justify-content:center;">
        <img [src]="screenshotUrl"
             (load)="onScreenshotLoad()"
             (error)="onScreenshotError()"
             alt="PC Screenshot"
             style="width:100%; height:100%; object-fit:contain; object-position:center center;"
        />
        <div class="meta">
          <span class="time">{{ getCurrentTimestamp() }}</span>
        </div>
      </div>
    </div>

    <div class="buttons" style="flex:1 1 auto; min-height:0; display:flex; align-items:center; justify-content:space-between; gap:.5rem; overflow:hidden;">
      <button class="btn" (click)="$event.stopPropagation(); monitorOn()" [class.inactive]="!monitorOnAvailable" [title]="monitorOnAvailable ? 'Monitor aufwecken' : 'Aktion nicht verfÃ¼gbar'">
        ğŸ–¥ï¸ Monitor an
      </button>
      <button class="btn" (click)="$event.stopPropagation(); playPause()" [class.inactive]="!mediaAvailable" [title]="mediaAvailable ? 'Media Play/Pause' : 'Aktion nicht verfÃ¼gbar'">
        â¯ï¸ Play/Pause
      </button>
      <div class="spacer"></div>
      <button class="btn warn" (click)="$event.stopPropagation(); sleep()" [class.inactive]="!sleepAvailable" [title]="sleepAvailable ? 'Ruhezustand' : 'Aktion nicht verfÃ¼gbar'">
        ğŸŒ™ Sleep
      </button>
      <button class="btn warn" (click)="$event.stopPropagation(); restart()" [class.inactive]="!restartAvailable" [title]="restartAvailable ? 'Neu starten' : 'Aktion nicht verfÃ¼gbar'">
        ğŸ” Restart
      </button>
      <button class="btn danger" (click)="$event.stopPropagation(); shutdown()" [class.inactive]="!shutdownAvailable" [title]="shutdownAvailable ? 'Herunterfahren' : 'Aktion nicht verfÃ¼gbar'">
        â» Shutdown
      </button>
    </div>
  </div>

  <ng-template #offlineTpl>
    <div class="offline-box">
      <div>PC ist offline.</div>
      <button class="btn primary" (click)="$event.stopPropagation(); wakePc()" [class.inactive]="!wolAvailable" [title]="wolAvailable ? 'Wake on LAN' : 'Aktion nicht verfÃ¼gbar'">
        âš¡ Aufwecken
      </button>
    </div>
  </ng-template>
</div>
