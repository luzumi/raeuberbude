
<!-- Kompakte Samsung-TV-Kachel mit Status, Lautstärke und Quelle -->
<div class="device samsung-tv-minimal">
  @if (samsung) {
    <div class="controls">
      <app-button
        [active]="isOn"
        [color]="'red'"
        [backgroundColor]="'green'"
        [activeColor]="'green'"
        [glowOn]="false"
        [size]="'1.5rem'"
        [icon]="'power_settings_new'"
        (click)="$event.stopPropagation(); togglePower();"
      ></app-button>

      <button mat-icon-button (click)="$event.stopPropagation(); volumeDown()">
        <mat-icon>volume_down</mat-icon>
      </button>
      <button mat-icon-button (click)="$event.stopPropagation(); volumeUp()">
        <mat-icon>volume_up</mat-icon>
      </button>
      <button mat-icon-button (click)="$event.stopPropagation(); channelDown()">
        <mat-icon>arrow_downward</mat-icon>
      </button>
      <button mat-icon-button (click)="$event.stopPropagation(); channelUp()">
        <mat-icon>arrow_upward</mat-icon>
      </button>

      <select [(ngModel)]="selectedSource"
              (click)="$event.stopPropagation()"
              (change)="$event.stopPropagation(); changeSource(selectedSource)">
        @for (src of sources; track src) {
          <option [value]="src">{{ src }}</option>
        }
      </select>
    </div>


    <!-- Statusanzeige im Kachel-Layout -->
    <div class="status-grid">
      <!-- Geräte-Name über volle Breite -->
      <div class="tile device-tile">
        <mat-icon>tv</mat-icon>
        <span>{{ name }}</span>
      </div>

      <!-- Status mit Icon und Zeitstempel -->
      <div class="tile state-tile">
        <mat-icon class="state-icon" [class.on]="isOn">power_settings_new</mat-icon>
        <div class="state-text">
          <div>{{ state }}</div>
          <div class="since">{{ statusSince }}</div>
        </div>
      </div>

      <!-- Lautstärke mit grafischer Anzeige und Zahl -->
      <div class="tile volume-tile">
        <span class="volume-value">{{ volume }}%</span>
        <div class="bar">
          <div class="fill" [style.width.%]="volume"></div>
        </div>
      </div>

      <!-- Source über volle Breite -->
      <div class="tile source-tile">
        <mat-icon>settings_input_hdmi</mat-icon>
        <span>{{ currentSource }}</span>
      </div>
    </div>
  } @else {
    <div class="status">TV nicht gefunden</div>
  }

</div>
