<div class="menu-container">

  <!-- Kreis & Animation: bleibt sichtbar solange keine Auswahl oder Animation läuft -->
  @if (!selectedEntity || animateSequence) {
    <!-- 1) Menü-Button in der Mitte -->
    <app-button
      class="center-btn"
      [name]="menuEntity.name"
      [icon]="menuEntity.icon"
      (click)="onMenuClick()"
      [active]="menuVisible"
      [style.left.%]="50"
      [style.top.%]="50"
    ></app-button>

    <!-- 2) Alle Entities im Kreis -->
    <div class="circle-group" [class.animate]="animateSequence">
      @for (e of entities; track e.name) {
        <app-button
          class="circle-btn"
          [class.animate]="animateSequence"
          [style.left.%]="e.left"
          [style.top.%]="e.top"
          (click)="openEntity(e)"
          [name]="e.name"
          [svgIcon]="e.svgIcon"
          [color]="e.color ?? 'red'"
        ></app-button>
      }
    </div>
  }

  <!-- Sidebar: erst anzeigen, wenn Auswahl besteht und Animation vorbei ist -->
  @if (selectedEntity && !animateSequence) {
    <div class="sidebar-container">
      <app-button
        name="Zurück"
        icon="arrow_back"
        (click)="closeEntity()"
        [active]="false"
      ></app-button>
      <app-button
        [name]="menuEntity.name"
        [icon]="menuEntity.icon"
        (click)="onMenuClick()"
        [active]="false"
      ></app-button>
      @for (e of sidebarItems; track e.name) {
        <app-button
          [name]="e.name"
          [svgIcon]="e.svgIcon"
          (click)="openEntity(e)"
          [active]="selectedEntity === e"
        ></app-button>
      }
    </div>
    <div class="entity-detail-container"></div>
  }
</div>
