/* src/app/features/dashboard/room-menu/room-menu-component.scss */

/* 1) Component-Host-Variablen */
:host {
  --flight-dur: 11.5s;
  --rm-button-size: clamp(2.5rem, 6vw, 4rem);
}

/* 2) Container – Header ist jetzt global, daher kein Offset notwendig */
.container {
  position: absolute;
  top: 0;        /* Header-Abstand wird in AppComponent gesetzt */
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* 3) Innerer Bereich */
.center-container {
  position: relative;
  width: 100%;
  height: 100%;
}

/* 4) Basisposition aller Buttons */
.center-btn,
.circle-btn {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  pointer-events: auto;
}

/* 5) Rad-Menü (Phasen 1–3) */
.circle-group {
  position: absolute;
  inset: 0;
  pointer-events: none;
  transform-origin: center center;

  /* Radius und Animationsparameter */
  --r: 200px;
  --target-delta: 0deg;
  --spin-to-dur: 1s;

  /* Wheel-Drehung */
  &.animate {
    animation: spinUp 1s ease-in forwards,
    spinConstant 3s linear calc(1s) infinite;
  }

  /* Ausrichten */
  &.align {
    animation: spinToTop var(--spin-to-dur) ease-in forwards;
  }
}

/* 6) Position auf dem Kreis */
/* Nutzt Sass-Interpolation, damit calc-Ausdrücke unverändert bleiben */
.circle-btn {
  transform-origin: center center;
  transform: translate(-50%, -50%)
  rotate(var(--angle))
  translate(var(--r))
  rotate(#{'calc(-1 * var(--angle))'});
}

/* 7) Flug-Phase: Animation auf die einzelnen Buttons */
.circle-group.flight .circle-btn {
  animation: flight var(--flight-dur) ease-out forwards;
}

/* 8) Keyframes für Wheel */
@keyframes spinUp {
  from { transform: rotate(0deg); }
  to   { transform: rotate(-360deg); }
}

@keyframes spinConstant {
  from { transform: rotate(-360deg); }
  to   { transform: rotate(-720deg); }
}

/* 9) Keyframes fürs Ausrichten */
@keyframes spinToTop {
  from { transform: rotate(0deg); }
  to   { transform: rotate(#{'calc(-1 * var(--target-delta))'}); }
}

/* 10) Ballistische Flugkurve */
@keyframes flight {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%)
    rotate(var(--angle))
    translate(var(--r))
    rotate(#{'calc(-1 * var(--angle))'});
  }
  50% {
    opacity: 1;
    transform: translate(-50%, -50%)
    rotate(var(--angle))
    translate(#{'calc(var(--r) * 1.5)'})
    rotate(#{'calc(-1 * var(--angle))'});
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) translate(0, -150vh);
  }
}

/* 11) Detail-Ansicht unter dem Header */
.entity-detail-container {
  position: absolute;
  top: 0;      /* globaler Header bereits berücksichtigt */
  bottom: 0;
  left: 0;
  right: 0;
  padding: 1rem;
  overflow: auto;
  background: #fafafa;
}

/* Positionierter Link zum Dashboard */
.dashboard-link {
  position: absolute;
  right: 1rem;
  bottom: 1rem;
  padding: 0.4rem 0.8rem;
  background: rgba(255, 255, 255, 0.8);
  border-radius: 4px;
  text-decoration: none;
  color: #333;
}
